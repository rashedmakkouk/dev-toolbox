"use strict";(self.webpackChunk_rashedmakkouk_dev_toolbox=self.webpackChunk_rashedmakkouk_dev_toolbox||[]).push([[2043],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return k}});var l=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=l.createContext({}),p=function(e){var t=l.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=p(e.components);return l.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},c=l.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,o=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(a),k=n,m=c["".concat(o,".").concat(k)]||c[k]||u[k]||r;return a?l.createElement(m,s(s({ref:t},d),{},{components:a})):l.createElement(m,s({ref:t},d))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var p=2;p<r;p++)s[p]=a[p];return l.createElement.apply(null,s)}return l.createElement.apply(null,a)}c.displayName="MDXCreateElement"},3738:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return o},default:function(){return k},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return u}});var l=a(7462),n=a(3366),r=(a(7294),a(3905)),s=["components"],i={title:"Linux",sidebar_label:"Linux"},o=void 0,p={unversionedId:"devops/linux",id:"devops/linux",title:"Linux",description:"Manage services",source:"@site/content/devops/linux.md",sourceDirName:"devops",slug:"/devops/linux",permalink:"/dev-toolbox/devops/linux",draft:!1,editUrl:"https://github.com/rashedmakkouk/dev-toolbox/edit/main/content/devops/linux.md",tags:[],version:"current",lastUpdatedBy:"Rashed Makkouk",lastUpdatedAt:1673188359,formattedLastUpdatedAt:"1/8/2023",frontMatter:{title:"Linux",sidebar_label:"Linux"},sidebar:"sidebar",previous:{title:"Git",permalink:"/dev-toolbox/devops/git"},next:{title:"VirtualBox",permalink:"/dev-toolbox/devops/virtualbox"}},d={},u=[{value:"Manage services",id:"manage-services",level:2},{value:"Start service",id:"start-service",level:3},{value:"Restart service",id:"restart-service",level:3},{value:"Add service to startup",id:"add-service-to-startup",level:3},{value:"Check status of services",id:"check-status-of-services",level:3},{value:"Restart SSH server",id:"restart-ssh-server",level:3},{value:"List running processes on specific port",id:"list-running-processes-on-specific-port",level:3},{value:"Kill running process",id:"kill-running-process",level:3},{value:"Commands",id:"commands",level:2},{value:"Determine running OS release",id:"determine-running-os-release",level:3},{value:"Download and extract file",id:"download-and-extract-file",level:3},{value:"Create cron jobs",id:"create-cron-jobs",level:3},{value:"OS",id:"os",level:2},{value:"Install packages",id:"install-packages",level:3},{value:"Install missing dependencies",id:"install-missing-dependencies",level:3},{value:"Exclude or ignore specific package from upgrades",id:"exclude-or-ignore-specific-package-from-upgrades",level:3},{value:"System",id:"system",level:2},{value:"Upgrade OS version",id:"upgrade-os-version",level:3},{value:"Enable SSH root login",id:"enable-ssh-root-login",level:3},{value:"Update <code>$PATH</code>",id:"update-path",level:3},{value:"Network interface",id:"network-interface",level:3},{value:"DNS",id:"dns",level:3},{value:"Set Timezone",id:"set-timezone",level:3},{value:"Filesystem",id:"filesystem",level:2},{value:"Add user permission to directory",id:"add-user-permission-to-directory",level:3},{value:"Add file execution permission",id:"add-file-execution-permission",level:3},{value:"List OS disks",id:"list-os-disks",level:3},{value:"Delete all hidden files (starts with <code>.</code>)",id:"delete-all-hidden-files-starts-with-",level:3},{value:"Check disk",id:"check-disk",level:3},{value:"Check and fix corrupted partition",id:"check-and-fix-corrupted-partition",level:3},{value:"Check folder permissions",id:"check-folder-permissions",level:3},{value:"Conditional <code>mkdir</code>",id:"conditional-mkdir",level:3},{value:"Preserve file attributes on copy",id:"preserve-file-attributes-on-copy",level:3},{value:"cifs-utils",id:"cifs-utils",level:3},{value:"Create symbolic link",id:"create-symbolic-link",level:3},{value:"User",id:"user",level:2},{value:"Change password",id:"change-password",level:3},{value:"Switch user",id:"switch-user",level:3},{value:"List users in group",id:"list-users-in-group",level:3},{value:"Add user to group",id:"add-user-to-group",level:3},{value:"Packages",id:"packages",level:2},{value:"supervisor",id:"supervisor",level:3}],c={toc:u};function k(e){var t=e.components,a=(0,n.Z)(e,s);return(0,r.kt)("wrapper",(0,l.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"manage-services"},"Manage services"),(0,r.kt)("h3",{id:"start-service"},"Start service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start <name>\n\nservice <name> start\n")),(0,r.kt)("h3",{id:"restart-service"},"Restart service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart networking.service\nsystemctl restart <name>\nservice <name> status\n")),(0,r.kt)("h3",{id:"add-service-to-startup"},"Add service to startup"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable <name>\n")),(0,r.kt)("h3",{id:"check-status-of-services"},"Check status of services"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"service --status-all\n")),(0,r.kt)("h3",{id:"restart-ssh-server"},"Restart SSH server"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/init.d/ssh restart\nsystemctl restart sshd\n")),(0,r.kt)("h3",{id:"list-running-processes-on-specific-port"},"List running processes on specific port"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"netstat -ano | findstr :3001\n")),(0,r.kt)("h3",{id:"kill-running-process"},"Kill running process"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tskill PID\n")),(0,r.kt)("h2",{id:"commands"},"Commands"),(0,r.kt)("h3",{id:"determine-running-os-release"},"Determine running OS release"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cat /etc/*release\nlsb_release -a\ncat /etc/debian_version\nuname -mrs\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"source /etc/os-release\n\necho $ID\necho $NAME\n")),(0,r.kt)("h3",{id:"download-and-extract-file"},"Download and extract file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -SL 'url' \\\n     | tar -xvzf - --strip-components=1 -C /path/to/output/dir\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"-k")," flag to ignore SSL validation. \\\n",(0,r.kt)("inlineCode",{parentName:"p"},"-C")," stands for directory. \\\n",(0,r.kt)("inlineCode",{parentName:"p"},"--string-components=#")," subdirectory level to extract files from.")),(0,r.kt)("h3",{id:"create-cron-jobs"},"Create cron jobs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"crontab -e -u root\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Examples:")),(0,r.kt)("p",null,"Run simple command at scheduled time:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ascii"},"0 18 * * 0-6  <command>\n")),(0,r.kt)("p",null,"Run command and log results to file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ascii"},"0 18 * * 0-6  <command> >> /path/to/output.log 2>&1\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Use >> to ",(0,r.kt)("inlineCode",{parentName:"p"},"append")," messages to output file, else > to ",(0,r.kt)("inlineCode",{parentName:"p"},"overwrite"),".")),(0,r.kt)("p",null,"File descriptors:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1: Standard output (stdout)."),(0,r.kt)("li",{parentName:"ul"},"2: Standard error (stderr).")),(0,r.kt)("h2",{id:"os"},"OS"),(0,r.kt)("h3",{id:"install-packages"},"Install packages"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Update installed packages before installing new ones.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt-get update && apt-get install <package> <another-package>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dpkg -i <package>\n")),(0,r.kt)("p",null,"Commit package upgrades:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt-get upgrade\n")),(0,r.kt)("h3",{id:"install-missing-dependencies"},"Install missing dependencies"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt --fix-broken install\napt-get install -f\n")),(0,r.kt)("h3",{id:"exclude-or-ignore-specific-package-from-upgrades"},"Exclude or ignore specific package from upgrades"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt-mark hold <package>\n")),(0,r.kt)("p",null,"List on hold packages:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt-mark showhold\n")),(0,r.kt)("h2",{id:"system"},"System"),(0,r.kt)("h3",{id:"upgrade-os-version"},"Upgrade OS version"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.debian.org/releases/lenny/amd64/release-notes/ch-upgrading.en.html"},"Upgrades from previous releases"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt-get update && apt-get dist-upgrade\n")),(0,r.kt)("h3",{id:"enable-ssh-root-login"},"Enable SSH root login"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"/etc/ssh/sshd_config")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ascii"},"PermitRootLogin yes\nPasswordAuthentication yes\n")),(0,r.kt)("h3",{id:"update-path"},"Update ",(0,r.kt)("inlineCode",{parentName:"h3"},"$PATH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'export PATH="$PATH:/usr/sbin"\necho $PATH\n')),(0,r.kt)("h3",{id:"network-interface"},"Network interface"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"/etc/network/interfaces")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"auto eth0\n  iface eth0 inet static\n    address x.x.x.x\n    netmask x.x.x.x\n    gateway x.x.x.x\n")),(0,r.kt)("h3",{id:"dns"},"DNS"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"/etc/resolv.conf")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"nameserver x.x.x.x\n")),(0,r.kt)("h3",{id:"set-timezone"},"Set Timezone"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"timedatectl set-timezone UTC\n")),(0,r.kt)("h2",{id:"filesystem"},"Filesystem"),(0,r.kt)("h3",{id:"add-user-permission-to-directory"},"Add user permission to directory"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sudo chown -R <username> path/to/directory\n")),(0,r.kt)("h3",{id:"add-file-execution-permission"},"Add file execution permission"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"chmod +x /path/to/file\n")),(0,r.kt)("h3",{id:"list-os-disks"},"List OS disks"),(0,r.kt)("p",null,"Lists only usable disks:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"df")),(0,r.kt)("p",null,"Lists all attached disks:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fdisk -l")),(0,r.kt)("h3",{id:"delete-all-hidden-files-starts-with-"},"Delete all hidden files (starts with ",(0,r.kt)("inlineCode",{parentName:"h3"},"."),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"rm -rf /.[!.]*\n")),(0,r.kt)("h3",{id:"check-disk"},"Check disk"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fsck -f /dev/disk\n")),(0,r.kt)("h3",{id:"check-and-fix-corrupted-partition"},"Check and fix corrupted partition"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Boot in recovery mode -> ",(0,r.kt)("inlineCode",{parentName:"p"},"Linux OS (recovery mode)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Login with root account")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Unmount partition to be checked:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"umount /dev/partition\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Run command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sudo fsck -f /\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Reboot:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"reboot\n")),(0,r.kt)("h3",{id:"check-folder-permissions"},"Check folder permissions"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"ls -la path\nls -ld path\n")),(0,r.kt)("h3",{id:"conditional-mkdir"},"Conditional ",(0,r.kt)("inlineCode",{parentName:"h3"},"mkdir")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-Shell"},"if not exist path/to/dir mkdir path\\\\to\\\\dir\n")),(0,r.kt)("h3",{id:"preserve-file-attributes-on-copy"},"Preserve file attributes on copy"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"cp -r --preserve=mode,ownership,timestamps <source> <destination>")),(0,r.kt)("p",null,"Available attributes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"mode"),(0,r.kt)("li",{parentName:"ul"},"ownership"),(0,r.kt)("li",{parentName:"ul"},"timestamps"),(0,r.kt)("li",{parentName:"ul"},"context"),(0,r.kt)("li",{parentName:"ul"},"links"),(0,r.kt)("li",{parentName:"ul"},"all")),(0,r.kt)("h3",{id:"cifs-utils"},"cifs-utils"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mount -t cifs //<host>/<shared-dir> /mnt/<mount-dir> -o username=<username>,password=<password>,domain=<domain>,rw,file_mode=0777,dir_mode=0777\n")),(0,r.kt)("h3",{id:"create-symbolic-link"},"Create symbolic link"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sudo ln -s /path/to/link/file.txt /path/to/target/file.txt\n\nsudo ln -s /path/to/link/directory /path/to/target/directory\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sudo unlink|rm /path/to/target/(file.txt|directory)\n")),(0,r.kt)("h2",{id:"user"},"User"),(0,r.kt)("h3",{id:"change-password"},"Change password"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"passwd\n")),(0,r.kt)("h3",{id:"switch-user"},"Switch user"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"su - username\n")),(0,r.kt)("h3",{id:"list-users-in-group"},"List users in group"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"getent group groupname\n")),(0,r.kt)("h3",{id:"add-user-to-group"},"Add user to group"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/sbin/adduser username group\n")),(0,r.kt)("h2",{id:"packages"},"Packages"),(0,r.kt)("h3",{id:"supervisor"},"supervisor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"supervisorctl update\nsupervisorctl reread\n")),(0,r.kt)("p",null,"Manage programs:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"supervisorctl\n\nstart <program>\nstop <program>\nrestart <program>\ntail <program>\n\nstatus\nquit\n")))}k.isMDXComponent=!0}}]);